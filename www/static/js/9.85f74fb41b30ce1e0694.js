webpackJsonp([9],{Eglk:function(t,e){},HMqE:function(t,e){},KrcP:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),n=o.n(i),s=o("NYxO"),r=o("vLgD"),a=o("wliq"),l={props:[],components:{},data:function(){return{}},computed:n()({},Object(s.c)({roleList:"roleList"})),methods:n()({},Object(s.b)({getRoleList:"getRoleList"}),{edit:function(t){this.$emit("update",t)},del:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.C)(t).then(function(t){200==t.data.code?(Object(a.a)(t.data.msg),e.getRoleList()):Object(a.b)(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}),mounted:function(){this.getRoleList()}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.roleList,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[o("el-table-column",{attrs:{prop:"id",label:"角色编号",sortable:"",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"rolename",label:"角色名称",sortable:"",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?o("el-button",{attrs:{type:"primary"}},[t._v("启用")]):t._e(),t._v(" "),2==e.row.status?o("el-button",{attrs:{type:"primary"}},[t._v("禁用")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"icon",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.edit(e.row.id)}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var u=o("VU/8")(l,c,!1,function(t){o("RNcv")},"data-v-a41c4ff8",null).exports,d=o("mvHQ"),m=o.n(d),f=(o("YaEn"),{props:["update"],components:{},data:function(){return{defaultProps:{children:"children",label:"title"},dialogFormVisible:!1,form:{rolename:"",menus:"[]",status:1},formLabelWidth:"120px"}},computed:n()({},Object(s.c)({menuList:"menuList"})),methods:n()({},Object(s.b)({getMenuList:"getMenuList",getRoleList:"getRoleList"}),{cancle:function(){this.dialogFormVisible=!1,this.clearForm()},clearForm:function(){this.form={rolename:"",menus:"[]",status:1}},addRoleList:function(){var t=this;this.form.menus=m()(this.$refs.tree.getCheckedKeys()),this.dialogFormVisible=!1,Object(r.a)(this.form).then(function(e){t.getRoleList(),t.clearForm()})},getRoleDetail:function(t){var e=this;Object(r.D)(t).then(function(o){e.form=o.data.list,e.form.id=t,e.$refs.tree.setCheckedKeys(JSON.parse(e.form.menus))})},updateRole:function(){var t=this;this.form.menus=m()(this.$refs.tree.getCheckedKeys()),Object(r.Q)(this.form).then(function(e){200==e.data.code?(Object(a.a)(e.data.msg),t.dialogFormVisible=!1,t.clearForm(),t.getRoleList()):Object(a.b)(e.data.msg)})}}),mounted:function(){0===this.menuList.length&&this.getMenuList()}}),h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:1==t.update?"角色添加":"菜单修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"角色名称","label-width":t.formLabelWidth},model:{value:t.form.rolename,callback:function(e){t.$set(t.form,"rolename",e)},expression:"form.rolename"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.rolename,callback:function(e){t.$set(t.form,"rolename",e)},expression:"form.rolename"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"角色权限"}},[o("el-tree",{ref:"tree",attrs:{data:t.menuList,"show-checkbox":"","node-key":"id",props:t.defaultProps}})],1),t._v(" "),o("el-form-item",{attrs:{label:"状态"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),t.update?o("el-button",{attrs:{type:"primary"},on:{click:t.addRoleList}},[t._v("添加")]):o("el-button",{attrs:{type:"primary"},on:{click:t.updateRole}},[t._v("修改")])],1)],1)],1)},staticRenderFns:[]};var p={props:[],components:{vList:u,vAdd:o("VU/8")(f,h,!1,function(t){o("Eglk")},"data-v-083e7e5b",null).exports},data:function(){return{isadd:!1}},computed:n()({},Object(s.c)({})),methods:n()({},Object(s.b)({}),{isShow:function(){this.isadd=!0,this.$refs.vchild.dialogFormVisible=!0},update:function(t){this.isadd=!1,this.$refs.vchild.dialogFormVisible=!0,this.$refs.vchild.getRoleDetail(t)}}),mounted:function(){}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:this.isShow}},[this._v("添加")]),this._v(" "),e("v-list",{on:{update:this.update}}),this._v(" "),e("v-add",{ref:"vchild",attrs:{update:this.isadd}})],1)},staticRenderFns:[]};var v=o("VU/8")(p,b,!1,function(t){o("HMqE")},"data-v-0c7f71be",null);e.default=v.exports},RNcv:function(t,e){}});
//# sourceMappingURL=9.85f74fb41b30ce1e0694.js.map